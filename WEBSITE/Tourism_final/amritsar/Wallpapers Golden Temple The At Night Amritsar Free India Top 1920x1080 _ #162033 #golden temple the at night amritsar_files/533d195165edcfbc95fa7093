!function(a,b){"use strict";function c(){this.initialize()}function d(){this.domUtilsInitialize()}function e(){}function f(a,b,c){this.initialize(a,b,c)}function g(a,b,c){this.initialize(a,b,c)}function h(a,b){this.initialize(a,b)}function i(a,b){this._isChrome=!a.isAndroidNativeBrowser(),this.initialize(a,b)}function j(a,b,c){this.initialize(a,b,c)}function k(){}function l(a,b,c){this.initialize(a,b,c)}function m(a,b,c,d){this.initialize(a,b,c,d)}function n(a,b){this.initialize(a,b)}function o(a,b,c,d){this.initialize(a,b,c,d)}function p(a,b,c){this.initialize(a,b,c)}function q(a,b,c,d){this.initialize(a,b,c,d)}function r(a,b,c){this.initialize(a,b,c)}function s(a,b){this.initialize(a,b)}function t(a,b,c){this.initialize(a,b,c)}function u(){function a(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}a(arguments[0],arguments[1])}function v(a,b){this.initialize(a,b)}function w(a,b){this._isIOS6=a.isIOS6(),this._isChrome=a.isChromeBrowser(),this._isFacebookWebView=a.isFacebookWebView(),this.initialize(a,b)}function x(a,b,c){this.initialize(a,b,c)}var y=function(a,b){var c="",d="?",e="function",f="undefined",g="object",h="major",i="model",j="name",k="type",l="vendor",m="version",n="console",o="mobile",p="tablet",q={has:function(a,b){return-1!==b.toLowerCase().indexOf(a.toLowerCase())},lowerize:function(a){return a.toLowerCase()}},r={rgx:function(){for(var a,c,d,h,i,j,k,l=0,m=arguments;l<m.length;l+=2){var n=m[l],o=m[l+1];if(typeof a===f){a={};for(h in o)i=o[h],typeof i===g?a[i[0]]=b:a[i]=b}for(c=d=0;c<n.length;c++)if(j=n[c].exec(this.getUA())){for(h=0;h<o.length;h++)k=j[++d],i=o[h],typeof i===g&&i.length>0?2==i.length?a[i[0]]=typeof i[1]==e?i[1].call(this,k):i[1]:3==i.length?a[i[0]]=typeof i[1]!==e||i[1].exec&&i[1].test?k?k.replace(i[1],i[2]):b:k?i[1].call(this,k,i[2]):b:4==i.length&&(a[i[0]]=k?i[3].call(this,k.replace(i[1],i[2])):b):a[i]=k?k:b;break}if(j)break}return a},str:function(a,c){for(var e in c)if(typeof c[e]===g&&c[e].length>0){for(var f=0;f<c[e].length;f++)if(q.has(c[e][f],a))return e===d?b:e}else if(q.has(c[e],a))return e===d?b:e;return a}},s={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},t={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[j,m,h],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[j,"Opera"],m,h],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[j,m,h],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[j,"IE"],m,h],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[j,"Yandex"],m,h],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[j,/_/g," "],m,h],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[j,m,h],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[j,"Dolphin"],m,h],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[j,"Chrome"],m,h],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[m,h,[j,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[m,h,j],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[j,[h,r.str,s.browser.oldsafari.major],[m,r.str,s.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[j,m,h],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[j,"Netscape"],m,h],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[j,m,h]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[i,l,[k,p]],[/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,i,[k,p]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[i,l,[k,o]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,i,[k,o]],[/\((bb10);\s(\w+)/i],[[l,"BlackBerry"],i,[k,o]],[/android.+((transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+))/i],[[l,"Asus"],i,[k,p]],[/(sony)\s(tablet\s[ps])/i],[l,i,[k,p]],[/(nintendo)\s([wids3u]+)/i],[l,i,[k,n]],[/((playstation)\s[3portablevi]+)/i],[[l,"Sony"],i,[k,n]],[/(sprint\s(\w+))/i],[[l,r.str,s.device.sprint.vendor],[i,r.str,s.device.sprint.model],[k,o]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[l,[i,/_/g," "],[k,o]],[/\s((milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?))[\w\s]+build\//i,/(mot)[\s-]?(\w+)*/i],[[l,"Motorola"],i,[k,o]],[/android.+\s((mz60\d|xoom[\s2]{0,2}))\sbuild\//i],[[l,"Motorola"],i,[k,p]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9))/i],[[l,"Samsung"],i,[k,p]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[l,"Samsung"],i,[k,o]],[/(sie)-(\w+)*/i],[[l,"Siemens"],i,[k,o]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[l,"Nokia"],i,[k,o]],[/android\s3\.[\s\w-;]{10}((a\d{3}))/i],[[l,"Acer"],i,[k,p]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],i,[k,p]],[/((nexus\s[45]))/i,/(lg)[e;\s-\/]+(\w+)*/i],[[l,"LG"],i,[k,o]],[/android.+((ideatab[a-z0-9\-\s]+))/i],[[l,"Lenovo"],i,[k,p]],[/(mobile|tablet);.+rv\:.+gecko\//i],[k,l,i]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[j,m],[/rv\:([\w\.]+).*(gecko)/i],[m,j]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[j,[m,r.str,s.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[j,"Windows"],[m,r.str,s.os.windows.version]],[/\((bb)(10);/i],[[j,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[j,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[j,"Symbian"],m],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[j,"Firefox OS"],m],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[j,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[j,"Chromium OS"],m],[/(sunos)\s?([\w\.]+\d)*/i],[[j,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[j,m],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[j,"iOS"],[m,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[j,[m,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[j,m]]},u=function(b){var d=b||(a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:c);return this instanceof u?(this.getBrowser=function(){return r.rgx.apply(this,t.browser)},this.getDevice=function(){return r.rgx.apply(this,t.device)},this.getEngine=function(){return r.rgx.apply(this,t.engine)},this.getOS=function(){return r.rgx.apply(this,t.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice()}},this.getUA=function(){return d},this.setUA=function(a){return d=a,this},void this.setUA(d)):new u(b).getResult()};return u}(a);c.prototype={constructor:c,_siteId:"533d195165edcfbc95fa7093",_ip:"unknown, 14.139.61.158",_serverDevMode:"false",_protocolPrefix:/^[a-zA-Z]+:\/\//,urlRegex:/\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?/i,initialize:function(){this._UAParser=new y,this._deviceInfo=this._getDeviceInfo(),this._createPolyfills()},getDeviceInfo:function(){return this._deviceInfo},_getDeviceInfo:function(){return this._UAParser.getResult()},_createPolyfills:function(){this._createBindPolyfill(),this._createJsonpPolyfill(),this._createTrimPolyfill(),this._createObjectKeysPolyfill()},_createBindPolyfill:function(){Function.prototype.bind=Function.prototype.bind||function(a){var b=this;return function(){return b.apply(a,arguments)}}},_createJsonpPolyfill:function(){!function(a){var b=a.setTimeout,c=a.document,d=0;a.jXHR=function(){function e(){try{l.parentNode.removeChild(l)}catch(a){}}function f(){k=!1,j="",e(),l=null,i(0)}function g(a){try{m.onerror.call(m,a,j)}catch(b){throw new Error(a)}}function h(){this.readyState&&"complete"!==this.readyState&&"loaded"!==this.readyState||k||(this.onload=this.onreadystatechange=null,k=!0,4!==m.readyState&&g("Script failed to load ["+j+"]."),e())}function i(a,b){b=b||[],m.readyState=a,"function"==typeof m.onreadystatechange&&m.onreadystatechange.apply(m,b)}var j,k,l,m=null;return m={onerror:null,onreadystatechange:null,readyState:0,open:function(b,c){f(),this.internal_callback="cb"+d++,function(b){a.jXHR[b]=function(){try{i.call(m,4,arguments)}catch(c){m.readyState=-1,g("Script failed to run ["+j+"].")}a.jXHR[b]=null}}(this.internal_callback),j=c.replace(/=\?/,"=jXHR."+this.internal_callback),i(1)},send:function(){b(function(){l=c.createElement("script"),l.setAttribute("type","text/javascript"),l.onload=l.onreadystatechange=function(){h.call(l)},l.setAttribute("src",j),c.getElementsByTagName("head")[0].appendChild(l)},0),i(2)},setRequestHeader:function(){},getResponseHeader:function(){return""},getAllResponseHeaders:function(){return[]}},f(),m}}(a)},_createTrimPolyfill:function(){String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}},_createObjectKeysPolyfill:function(){Object.keys=Object.keys||function(a){if(a!==Object(a))throw new TypeError("Object.keys called on a non-object");var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}},loadStyleSheet:function(a){var b={elementType:"link",attributes:{type:"text/css",rel:"stylesheet",href:a}};this._loadSResource(b)},loadScript:function(a,b,c){var d={elementType:"script",attributes:{type:"text/javascript"}};"url"==a?d.attributes.src=b:d.attributes.code=b,this._loadSResource(d,c)},_loadSResource:function(a,b){var c=document.getElementsByTagName("head")[0],d=document.createElement(a.elementType);"function"==typeof b&&(d.onload=b);for(var e in a.attributes)a.attributes.hasOwnProperty(e)&&("code"==e?d.appendChild(document.createTextNode(a.attributes.code)):d.setAttribute(e,a.attributes[e]));c.appendChild(d)},isSupportedMobile:function(){return this.isTouchScreen()&&(this.isIphone()||this.isAndroidMobile())},isIphone:function(){return/iphone/i.test(this._deviceInfo.device.model)},isAndroidMobile:function(){return this.isAndroid()&&/mobile/i.test(this._deviceInfo.ua)},isAndroid:function(){return/android/i.test(this._deviceInfo.os.name)},isIOS:function(){return/ios/i.test(this._deviceInfo.os.name)},isIOS6:function(){var a=this._getMajorVersion(this._deviceInfo.os.version);return this.isIOS()&&6==a},isSafariBrowser:function(){var a=/mobile safari/i.test(this._deviceInfo.browser.name),b=/safari/i.test(this._deviceInfo.browser.name)&&/mobile/i.test(this._deviceInfo.browser.name);return a||b},isChromeBrowser:function(){return/chrome/i.test(this._deviceInfo.browser.name)},isNewChromeBrowserOnAndroid:function(){if(!this.isAndroidMobile()||!this.isChromeBrowser())return!1;var a=this._getMajorVersion(this._deviceInfo.browser.version);return a>=27},isAndroidNativeBrowser:function(){if(this.isAndroid()){var a=this._getMajorVersion(this._deviceInfo.engine.version);return/mobile safari/i.test(this._deviceInfo.browser.name)&&537>a}},isOperaBrowser:function(){return/^opera$/i.test(this._deviceInfo.browser.name)},isOperaMiniBrowser:function(){return/^opera mini$/i.test(this._deviceInfo.browser.name)},getBrowserClassName:function(){var a,b=this.getOSClassNames()[0],c=this._getSupportedBrowsersForOS(b);return a=this.isAndroidNativeBrowser()?"native":this.isOperaBrowser()?"opera":this.isOperaMiniBrowser()?"opera-mini":this.isSafariBrowser()?"safari":this.isChromeBrowser()?"chrome":"chrome",-1===c.indexOf(a)&&(a=this.isIOS()?"safari":"chrome"),a},getOSClassNames:function(){return this.isIOS()?this.isIOS6()?["ios","ios6"]:["ios"]:this.isAndroid()?["android"]:["android"]},_getSupportedBrowsersForOS:function(a){var b={ios:["safari","chrome"],android:["chrome","native"]};return b[a]||b.android},_getMajorVersion:function(a){var b=this._parseVersion(a);return b[0]},_parseVersion:function(a){var b=a.split("."),c=[];return b&&b.forEach&&b.forEach(function(a){c.push(parseInt(a,10))}),c},isFacebookWebView:function(){var a=/(fb[a-z]{2}\/)/gi,b=this._deviceInfo.ua.match(a);return!!(b&&b.length&&b.length>4)},isTouchScreen:function(){return"ontouchstart"in a||a.DocumentTouch&&document instanceof a.DocumentTouch},isLandscape:function(){return a.orientation!==b&&0!==a.orientation},getSiteId:function(){return this._siteId},getDeviceDimensions:function(){var b=a.screen.width,c=a.screen.height,d=a.screen.availWidth/document.documentElement.clientWidth;return d=a.devicePixelRatio>=d?a.devicePixelRatio:d,this.isAndroid()&&!this.isNewChromeBrowserOnAndroid()&&(b/=d,c/=d),{width:b,height:c}},getScreenHeight:function(){return this.getDeviceDimensions().height},getScreenWidth:function(){return this.getDeviceDimensions().width},getZoom:function(){var b=this.getScreenWidth();return b/a.innerWidth},getIp:function(){return this._ip},_getDevicePixelRatio:function(){return a.devicePixelRatio},isMinimalUi:function(){if(this._isMinimalUi!==b)return this._isMinimalUi;var a,c,d,e=Array.prototype.slice.call(document.getElementsByTagName("meta")),f="minimal-ui";if(!this.isIphone()||!this.isSafariBrowser())return this._isMinimalUi=!1,this._isMinimalUi;var g=this._parseVersion(this._deviceInfo.os.version);if(g[0]<7)return this._isMinimalUi=!1,this._isMinimalUi;if(7===g[0]&&0===g[1])return this._isMinimalUi=!1,this._isMinimalUi;for(a=0;a<e.length;a++)if(c=e[a].getAttribute("name"),"viewport"!==!c&&(d=e[a].getAttribute("content"),d&&d.indexOf&&d.indexOf(f)>-1))return this._isMinimalUi=!0,this._isMinimalUi;return this._isMinimalUi=!1,this._isMinimalUi},sendJsonpRequest:function(a,b,c){c=c||"callback",a=a+"&"+c+"=?";var d=new jXHR;d.onreadystatechange=function(a){4===d.readyState&&b(a)},d.open("GET",a),d.send()},sendAjaxRequest:function(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===d.readyState&&200==d.status){var a=null;if("json"===c)try{a=JSON.parse(d.responseText)}catch(e){}else"xml"===c&&(a=d.responseXML&&d.responseXML.documentElement);b(a)}},d.open("GET",a,!0),d.send(null)},isDevMode:function(){var a="true"===this._serverDevMode,b=!!this.getQueryString().blanka;return a||b},getQueryString:function(a){for(var b,c={},d=/([^&=]+)=([^&]*)/g,e=a?a:location.search.substring(1);b=d.exec(e);)c[decodeURIComponent(b[1])]=decodeURIComponent(b[2]);return c},verifyAndAddProtocol:function(a){return a.match(this._protocolPrefix)||(a="http://"+a),a},isUrl:function(a){return a&&a.indexOf(" ")>-1?!1:this.urlRegex.test(a)},setAdIntegrationParams:function(a){this._adIntegrationParams=a},getAdIntegrationParams:function(){return this._adIntegrationParams}},d.prototype={constructor:d,_siteId:"533d195165edcfbc95fa7093",domUtilsInitialize:function(){this._selectorPrefix="#errnio-"+this._siteId+" ",this.$$=this.$$.bind(this)},$:document.querySelectorAll.bind(document),$$:function(a){return this.$(this._selectorPrefix+a)},addClass:function(a,b){a.classList&&!this.hasClass(a,b)&&a.classList.add(b)},removeClass:function(a,b){a.classList&&this.hasClass(a,b)&&a.classList.remove(b)},toggleClass:function(a,b){a.classList&&a.classList.toggle(b)},hasClass:function(a,b){return a.classList?a.classList.contains(b):!1},findParentNode:function(a,b){for(var c=b.parentNode;c&&c.tagName!==a;)c=c.parentNode;return c}},e.prototype={constructor:e,on:function(a,b,c){this._listeners=this._listeners||{},this._listeners[a]=this._listeners[a]||[],c=c||this,this._isListenerExist(a,b)||this._listeners[a].push({handler:b,context:c})},_isListenerExist:function(a,b){for(var c=this._listeners[a],d=[],e=0;e<c.length;e++)c[e].handler==b&&d.push(c[e]);return!!d.length},removeListener:function(a,b){var c=this._listeners[a]||[];this._without(c,b)},emit:function(a,b){var c=this._listeners&&this._listeners[a];c&&c.forEach(function(a){a.handler.apply(a.context,[b])})},_without:function(a,b){for(var c=null,d=0;d<a.length;d++)a[d].handler==b&&(c=d);return null===c?a:void(a=a.splice(c,1))}},f.prototype={constructor:f,numberOfTries:10,tryInterval:200,tryCount:0,topAdFound:!1,topAdWrapper:null,knownAdsHosts:["ad.definitimedia.com","ads.saymedia.com"],initialize:function(a,b,c){this.utils=a,this.events=b,this.adIntegrationConfig=c,this.errnioScriptSrcPattern=this.utils.isDevMode()?"/script/52d462bb12ddd4942622d7b3":"service.errnio.com/script",this.adIntegrationParams=this._getAdNetworkParams(this.adIntegrationConfig.getParamsFromScriptSrc),this.utils.setAdIntegrationParams(this.adIntegrationParams),this._cacheAdDomElement=this._cacheAdDomElement.bind(this),this._cacheAdDomElement()},_getAdNetworkParams:function(b){var c,d=a,e={};return b&&(c=this._getErrnioTagSrc(),c=-1===c.indexOf("?")?"":c.substring(c.indexOf("?")+1),d=this.utils.getQueryString(c)),this.adIntegrationConfig.paramsNames.forEach(function(a){var b=Object.keys(a)[0],c=a[b],f=c?d[c]:"skip param";"skip param"===f||(f?e[b]=f:console.log("AdIntegration. param not found: "+c))}),e},_getErrnioTagSrc:function(){var a=this.$('script[src*="'+this.errnioScriptSrcPattern+'"]');return a[0]?a[0].getAttribute("src"):[]},_cacheAdDomElement:function(){var a=this._findAds();if(a&&a.length){var b=Array.prototype.slice.call(a),c=this._filterTopAds(b);c.length&&(this.topAdFound=!0,this._handleTopAd(c[0]))}!this.topAdFound&&this.tryCount<this.numberOfTries&&(this.tryCount++,setTimeout(this._cacheAdDomElement,this.tryInterval))},_handleTopAd:function(a){this.topAdWrapper=a.parentElement,this.topAdWrapper&&this.topAdWrapper.getAttribute&&this._registerEvents();var b=this.$$(".errnio-wrapper")[0];b&&this.hasClass(b,"show")&&this._onErrnioShow()},_filterTopAds:function(a){var b=[];return a.forEach(function(a){var c=a.parentElement;if(c){var d=c.getAttribute("style");if(d&&d.indexOf){d=d.replace(/\s/gm,"");var e=0===d.indexOf("top:0")||d.indexOf(";top:0")>0;e&&b.push(a)}}}),b},_findAds:function(){var a='a[href*="[[adHost]]"]',b="",c=!0;return this.knownAdsHosts.forEach(function(d){c||(b+=","),c=!1,b+=a.replace("[[adHost]]",d)}),this.$(b)},_registerEvents:function(){this.events.on("errnioShow-ad",this._onErrnioShow,this),this.events.on("errnioHide-ad",this._onErrnioHide,this)},_onErrnioShow:function(){this._fixAdStyle("down")},_onErrnioHide:function(){this._fixAdStyle("up")},_fixAdStyle:function(a){var b=this.topAdWrapper.getAttribute("style");if(b){var c=this._getBarHeight(),d="down"===a?0:c,e=d?0:c;b=b.replace(/\s/gm,""),b=0===b.indexOf("top:"+d+"px")?b.replace("top:"+d+"px","top:"+e+"px"):0===b.indexOf("top:"+d)?b.replace("top:"+d,"top:"+e+"px"):b.indexOf(";top:"+d+"px")>0?b.replace(";top:"+d+"px",";top:"+e+"px"):b.replace(";top:"+d,";top:"+e+"px"),this.topAdWrapper.setAttribute("style",b)}},_getBarHeight:function(){var a=this.utils.getZoom();return Math.floor(parseFloat(""+50/a).toFixed(3))}},u(f.prototype,d.prototype),g.prototype={constructor:g,_feedUrl:"http://errnio_search_us.ampfeed.com/xmlamp/feed?partner=pub_errnio_search_us&v=2&ptype=mweb&kw=[[keyword]]&results=[[resultsCount]]&ip=[[ip]]&ua=[[userAgent]]&sub1=[[primaryPubId]]&sub2=[[secondaryPubId]]&puburl=[[currentUrl]]",initialize:function(a,b,c){this.utils=a,this.events=b,this.config=c,this._onFeedCallback=this._onFeedCallback.bind(this),this._setFeedUrlParams(),this._registerEvents()},_registerEvents:function(){this.events.on("adMarketplaceRequest",this._getFeed,this),this.events.on("adMarketplaceImpression",this._onAdMarketplaceImpression,this)},_setFeedUrlParams:function(){var b=this.utils.getAdIntegrationParams(),c=this.utils.isDevMode()?"174.34.243.63":this.config.ip,d=b.pubId||"";this._feedUrl=this._feedUrl.replace("[[resultsCount]]",this.config.adsCount),this._feedUrl=this._feedUrl.replace("[[ip]]",c),this._feedUrl=this._feedUrl.replace("[[userAgent]]",encodeURIComponent(this.config.userAgent)),this._feedUrl=this._feedUrl.replace("[[primaryPubId]]",this.utils.getSiteId()),this._feedUrl=this._feedUrl.replace("[[secondaryPubId]]",d),this._feedUrl=this._feedUrl.replace("[[currentUrl]]",encodeURIComponent(a.location.href)),d||(this._feedUrl=this._feedUrl.replace("&sub2=",""))},_getFeed:function(a){var b=this._feedUrl.replace("[[keyword]]",a.searchQuery);this.utils.sendAjaxRequest(b,this._onFeedCallback,"xml")},_onFeedCallback:function(a){var b,c;return a&&a.getElementsByTagName?(b=a.getElementsByTagName("listing"),b&&b.length?(c=Array.prototype.slice.call(b),c=this._parseXml2Json(c),void this.events.emit("adMarketplaceResponse",{results:c})):void console.log("No Ads")):void console.log("Bad XmlDoc")},_parseXml2Json:function(a){var b=[];return a.forEach(function(a){try{var c=a.getElementsByTagName("title")[0].childNodes[0].nodeValue,d=a.getElementsByTagName("clickurl")[0].childNodes[0].nodeValue,e=a.getElementsByTagName("impressionurl")[0].childNodes[0].nodeValue}catch(f){return}c&&d&&e&&b.push({title:c,clickUrl:d,impressionUrl:e})}),b},_onAdMarketplaceImpression:function(a){var b=a.adsArr;b.forEach(function(a){var b=new Image;b.setAttribute("src",a.impressionUrl)})}},h.prototype={constructor:h,initialize:function(a,b){this.utils=a,this.events=b,this._isNativeBarVisible=!0,this._screenHeightNativeBarVisible=this._getCurrentScreenHeight(),this._bindMethods(),this._registerDomEvents()}},i.prototype={constructor:i,_bindMethods:function(){this._onResize=this._onResize.bind(this)},_registerDomEvents:function(){this._isChrome&&a.addEventListener("resize",this._onResize,!1)},_getCurrentScreenHeight:function(){return document.documentElement.clientHeight},_onResize:function(){var a=this._checkNativeBarVisibility();a!=this._isNativeBarVisible&&(this._isNativeBarVisible=a,this.events.emit("nativeBarVisibilityChanged",{nativeBarVisible:a}))},_checkNativeBarVisibility:function(){var a=this._getCurrentScreenHeight();return a<=this._screenHeightNativeBarVisible},shouldShow:function(a,b,c){return this.utils.isLandscape()?!1:!this._isChrome&&a>5?!0:this._isChrome&&this.isNativeBarVisible()?!1:0!==b||c?!1:!0},isNativeBarVisible:function(){return this._isChrome?this._checkNativeBarVisibility():!1}},u(i.prototype,h.prototype),j.prototype={constructor:j,_searchSuggestHtmlStr:'<li class="autosuggest-item"><span class="AS-icon [[AS-type]]">&nbsp;</span>[[searchResult]]</li>',_adMarketplaceHtmlStr:'<li class="autosuggest-item" data-adClickUrl="[[clickUrl]]"><span class="AS-icon ad globe">&nbsp;</span>[[title]]</li>',googleSearchSuggestUrl:"http://www.google.com/complete/search?client=android&json&hl=en-US&q=[[searchQuery]]",initialize:function(a,b,c){this.domUtilsInitialize(),this.utils=a,this.events=b,this.config=c,this.adMarketplaceEnabled=this.config.adMarketplaceEnabled,this.domParts={},this.domParts.autosuggest=this.$$(".autosuggest")[0],this.lastSearchQuery=null,this._onSearchSuggestResponse=this._onSearchSuggestResponse.bind(this),this._onSearchSuggestClick=this._onSearchSuggestClick.bind(this),this._registerEvents()},_registerEvents:function(){this.events.on("searchSuggestRequest",this._onSearchSuggestRequest,this),this.events.on("clearSearchSuggest",this._onClearSearchSuggest,this),this.adMarketplaceEnabled&&this.events.on("adMarketplaceResponse",this._onAdMarketplaceResponse,this),this.domParts.autosuggest.addEventListener("click",this._onSearchSuggestClick,!1)},_onSearchSuggestRequest:function(a){this.searchInputCleared=!1,this.lastSearchQuery=a.searchInputValue;var b=encodeURIComponent(this.lastSearchQuery),c=this.googleSearchSuggestUrl.replace("[[searchQuery]]",b);this.utils.sendJsonpRequest(c,this._onSearchSuggestResponse)},_onSearchSuggestResponse:function(a){var b,c;return this.searchInputCleared?void this._onClearSearchSuggest():(b=this._parseSearchSuggestResults(a),void(b&&b.length&&(this.lastSearchQuery=null,this.adMarketplaceEnabled&&(c=this._getKeywordForAdMarketplace(b),c&&this.events.emit("adMarketplaceRequest",{searchQuery:c})),this._addResultsToDom(b))))},_parseSearchSuggestResults:function(a){var b=[],c=this;if(a&&a[0]&&a[1]&&a[1].length&&a[0]==this.lastSearchQuery)return a[1].forEach(function(a){b.push({text:a,isUrl:c.utils.isUrl(a)})}),b},_addResultsToDom:function(a){var b,c,d,e="",f=this.domParts.autosuggest,g=this;for(a.forEach(function(a){e+=g._searchSuggestHtmlStr.replace("[[searchResult]]",a.text).replace("[[AS-type]]",a.isUrl?"globe":"magGlass")}),f.innerHTML=e,c=this.$(".AS-icon"),d="width: "+Math.round(13/this.utils.getZoom())+"px !important;",b=0;b<c.length;b++)c[b].style.cssText=d},_onClearSearchSuggest:function(){this.domParts.autosuggest.innerHTML="",this.searchInputCleared=!0},_onSearchSuggestClick:function(b){b.stopPropagation();var c,d=b.target,e="",f=this;switch(d.nodeName){case"LI":e=d.innerText,c=d.getAttribute("data-adClickUrl");break;case"SPAN":e=d.parentNode.innerText,c=d.parentNode.getAttribute("data-adClickUrl")}c?this.events.emit("tracking",{event:"search",source:"Search AS",label:"adMarketplace",hitCallback:function(){f.events.emit("errnioHide",{skipTracking:!0}),a.location.href=c}}):e&&(this.events.emit("errnioHide",{skipTracking:!0}),this.events.emit("search",{searchTerm:e,event:"search",source:"Search AS"}))},_getKeywordForAdMarketplace:function(a){for(var b=0,c=a[b];c.isUrl&&b<a.length;)b++,c=a[b];return c.isUrl?null:c.text},_onAdMarketplaceResponse:function(a){var b,c,d,e=0,f="",g=this;if(!this.searchInputCleared&&a.results.length){for(a.results.forEach(function(a){e++,f+=g._adMarketplaceHtmlStr.replace("[[title]]",a.title).replace("[[clickUrl]]",a.clickUrl)}),this.domParts.autosuggest.innerHTML=f+this.domParts.autosuggest.innerHTML,b=this.$(".ad.AS-icon"),c="width: "+Math.round(13/this.utils.getZoom())+"px !important;",d=0;b&&d<b.length;d++)b[d].style.cssText=c;this.events.emit("adMarketplaceImpression",{adsArr:a.results})}}},u(j.prototype,d.prototype),k.prototype={constructor:k,_viewHtmlStr:decodeURIComponent("%3Cdiv%20class%3D%22errnio-wrapper%20refresh%22%3E%20%20%20%20%20%3Cdiv%20class%3D%22address-input-wrapper%22%3E%20%09%09%3Cform%3E%20%20%20%20%20%20%20%20%20%09%3Cinput%20class%3D%22search-input%22%20type%3D%22search%22%20title%3D%22Search%22%20autocapitalize%3D%22off%22%20autocorrect%3D%22off%22%20autocomplete%3D%22off%22%20placeholder%3D%22Search%22%20%2F%3E%20%09%09%3C%2Fform%3E%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22button%22%3E%3C%2Fdiv%3E%20%20%20%20%20%3C%2Fdiv%3E%20%20%20%20%20%3Cdiv%20class%3D%22content-wrapper%22%3E%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22poweredBy%22%3EPowered%20by%20%3Cspan%20class%3D%22poweredBy-errnio%22%3Eerrnio%3C%2Fspan%3E%3C%2Fdiv%3E%20%20%20%20%20%20%20%20%20%3Cul%20class%3D%22autosuggest%22%3E%20%20%20%20%20%20%20%20%20%3C%2Ful%3E%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22content%22%3E%3C%2Fdiv%3E%20%20%20%20%20%3C%2Fdiv%3E%20%09%3Cdiv%20class%3D%22facebook-wrapper%22%3E%20%09%09%3Ctable%20class%3D%22facebook-table%22%3E%20%09%09%09%3Ctr%3E%20%09%09%09%09%3Ctd%20class%3D%22facebook-img-td%22%3E%20%09%09%09%09%09%3Cspan%20class%3D%22facebook-img%22%3E%3C%2Fspan%3E%20%09%09%09%09%3C%2Ftd%3E%20%09%09%09%09%3Ctd%20class%3D%22facebook-title%22%3E%20%09%09%09%09%3C%2Ftd%3E%20%09%09%09%09%3Ctd%20class%3D%22facebook-button-td%22%3E%20%09%09%09%09%09%3Cspan%20class%3D%22facebook-button%22%3E%3C%2Fspan%3E%20%09%09%09%09%3C%2Ftd%3E%20%09%09%09%3C%2Ftr%3E%20%09%09%3C%2Ftable%3E%20%09%3C%2Fdiv%3E%20%3C%2Fdiv%3E%20%3Cdiv%20class%3D%22overlay%22%3E%3C%2Fdiv%3E"),initialize:function(b,c,d){this.domUtilsInitialize(),this.utils=b,this.events=c,this.domParts={view:".errnio-wrapper",searchInput:".search-input",button:".button",refreshBtn:".button.refresh",content:".content-wrapper",autosuggest:".autosuggest",overlay:".overlay",poweredBy:".poweredBy"},this._orientation=a.orientation,this.scrollTimeout=null,this.pinchTimeout=null,this.scrollEndDelay=50,this.pinchEndDelay=50,this.lastScrollTop=0,this.scrollDirection=0,this.loadState={DOMContent:!1,controller:!1},this._adjustViewSizeFirstTime=!0,this.lastAvailableHeight=this._getAvailableHeight(),this.pinched=!1,this.viewParams=d,this._deviceSpecificInitialization(),this.bindMethods(),this._registerEvents()},bindMethods:function(){this._onDomContentLoaded=this._onDomContentLoaded.bind(this),this._tryLoadErrnio=this._tryLoadErrnio.bind(this),this._onSearchInputFocus=this._onSearchInputFocus.bind(this),this._onSearchInputBlur=this._onSearchInputBlur.bind(this),this._onButtonClick=this._onButtonClick.bind(this),this._onScroll=this._onScroll.bind(this),this._onScrollEnd=this._onScrollEnd.bind(this),this._overlayZoomTouchMoveHandler=this._overlayZoomTouchMoveHandler.bind(this),this._onSearchInputKeyDown=this._onSearchInputKeyDown.bind(this),this._onSearchInputKeyInput=this._onSearchInputKeyInput.bind(this),this._preventMouseMoveEvent=this._preventMouseMoveEvent.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onPoweredByClick=this._onPoweredByClick.bind(this),this._bindDeviceSpecificMethods()},setMobileDevice:function(){var a=this.utils.getOSClassNames(),b=this.utils.getBrowserClassName();a.forEach(function(a){this.addClass(this.domParts.view,a)},this),this.addClass(this.domParts.view,b)},_registerEvents:function(){this._registerToDOMContentLoadedEvent(),this.events.on("errnioControllerReady",this._onErrnioControllerReady,this),this.events.on("errnioViewReady",function(){this.events.on("nativeBarVisibilityChanged",this._onNativeBarVisibilityChanged,this)},this),this.events.on("errnioHide",function(a){var b=a&&a.skipTracking||!1,c=a&&a.firstTime||!1;this._hide(b,c)},this)},_registerToDOMContentLoadedEvent:function(){var a=document.readyState;"complete"==a||"loaded"==a||"interactive"==a?this._onDomContentLoaded(null):document.addEventListener("DOMContentLoaded",this._onDomContentLoaded)},_onDomContentLoaded:function(a){a&&document.removeEventListener("DOMContentLoaded",this._onDomContentLoaded,!1),this.loadState.DOMContent=!0,this._tryLoadErrnio()},_onErrnioControllerReady:function(){this.loadState.controller=!0,this._tryLoadErrnio()},_tryLoadErrnio:function(){var a=!0;clearTimeout(this.loadErrnioTimeoutId);for(var b in this.loadState)this.loadState.hasOwnProperty(b)&&(a=a&&this.loadState[b]);a?this._loadErrnio():this.loadErrnioTimeoutId=setTimeout(this._tryLoadErrnio,250)},_loadErrnio:function(){this._addViewNodeToDom(this._viewHtmlStr),this._cacheDomParts(),this._registerDOMEvents(),this._setSearchInputValue(),this.setMobileDevice(),this.events.emit("errnioViewReady",{event:"Errnio load"}),this._setInitialStyles(),this.searchSuggest=new j(this.utils,this.events,{adMarketplaceEnabled:this.viewParams.adMarketplaceEnabled}),this.viewParams.showPoweredBy||this.addClass(this.domParts.poweredBy,"hidden")},_setInitialStyles:function(){this._adjustViewSize(!0)},_addViewNodeToDom:function(a){var b=document.createElement("div");b.setAttribute("id","errnio-"+this.utils.getSiteId()),this.addClass(b,"errnio-cleanslate"),b.innerHTML=a,this._prependBody(b)},_cacheDomParts:function(){for(var a in this.domParts){var b=this.$$(this.domParts[a])[0];this.domParts[a]=b}},_registerDOMEvents:function(){this._registerDeviceSpecificEvents(),this.domParts.searchInput.addEventListener("focus",this._onSearchInputFocus,!1),this.domParts.searchInput.addEventListener("input",this._onSearchInputKeyInput,!1),this.domParts.searchInput.addEventListener("keydown",this._onSearchInputKeyDown,!1),this.domParts.button.addEventListener("mousedown",this._onButtonClick,!1),this.domParts.poweredBy.addEventListener("click",this._onPoweredByClick,!1),a.addEventListener("scroll",this._onScroll,!1),a.addEventListener("orientationchange",this._onOrientationChange,!1),a.addEventListener("touchstart",function(a){var b=a.touches.length;b>1&&this._hide()}.bind(this));var b=a.Hammer(a.document.body,{preventMouse:!0,dragLockToAxis:!0,touch:!1,tap:!1,hold:!1,swipeVelocityY:.1,dragLockMinDistance:1,dragDistanceCorrection:!0,dragMinDistance:10}),c=["dragstart","dragend","swipeup","swipedown","transform","transformstart","transformend","pinch","pinchin","pinchout"],d={right:"right",left:"left",up:"up",down:"down"};b.on(c.join(" "),function(a){var b=a.gesture.touches.length,c=a.gesture.direction;
if(1===b){if(c===d.right||c===d.left)return;var e=~a.type.indexOf("drag")?"drag":"swipe";this.scrollDirection=c==d.up?0:1,this._onScrollEnd(e),a.gesture.stopDetect()}else this._hide(),this.pinched=!0}.bind(this))},_onNativeBarVisibilityChanged:function(a){a.nativeBarVisible&&!this.focused?this._hide():this._show()},_onPinchEnd:function(){this.pinchTimeout=null,this.pinched=!1},_onScrollEnd:function(a){console.log(a),this.focused||(this.scrollTimeout=null,this.pinched&&(null!==this.pinchTimeout&&clearTimeout(this.pinchTimeout),this.pinchTimeout=setTimeout(this._onPinchEnd.bind(this),this.pinchEndDelay)),this.barDetection.shouldShow(this.lastScrollTop,this.scrollDirection,this.pinched,a)?this._show():this._hide())},_show:function(){this._isBarShowing(this.domParts.view)||this.events.emit("errnioShow",{event:"Bar show"}),this._adjustViewSize(!1,!0),this.addClass(this.domParts.view,"show"),this.events.emit("errnioShow-ad",{})},_onSearchInputKeyDown:function(a){var b=this.domParts.searchInput.value;13===a.keyCode&&(setTimeout(this._onSearchInputBlur,50),this._search(b,"regularSearch"))},_onSearchInputKeyInput:function(){var a=this.domParts.searchInput.value;a?this.events.emit("searchSuggestRequest",{searchInputValue:a}):this.events.emit("clearSearchSuggest")},_search:function(a,b){this.events.emit("search",{searchTerm:a,event:"search",source:b}),this._hide(!0)},_disableTouchMove:function(){a.addEventListener("touchmove",this._preventMouseMoveEvent,!1)},_preventMouseMoveEvent:function(a){a.preventDefault()},_enableTouchMove:function(){a.removeEventListener("touchmove",this._preventMouseMoveEvent,!1)},_selectAllInputText:function(){this.domParts.searchInput.setSelectionRange?setTimeout(function(){this.domParts.searchInput.setSelectionRange(0,9999)}.bind(this),50):this.domParts.searchInput.select&&setTimeout(function(){this.domParts.searchInput.select()}.bind(this),50)},_clearTextSelection:function(){var b=a.getSelection().removeAllRanges();b&&b.removeAllRanges&&b.removeAllRanges(),setTimeout(function(){var a=this.domParts.searchInput.value;this.domParts.searchInput.value="",this.domParts.searchInput.value=a}.bind(this),10)},_getScrollPosition:function(){return{top:document.documentElement.scrollTop||document.body.scrollTop,left:document.documentElement.scrollLeft||document.body.scrollLeft}},_toggleButtonMode:function(a){var b="refresh"==a?"clear":"refresh";this.addClass(this.domParts.view,a),this.removeClass(this.domParts.view,b)},_toggleScreenOverlay:function(a){a?(this.addClass(this.domParts.overlay,"show-overlay"),this._disableZoom()):(this.removeClass(this.domParts.overlay,"show-overlay"),this._enableZoom())},_disableZoom:function(){this.domParts.overlay.addEventListener("touchmove",this._overlayZoomTouchMoveHandler,!1)},_enableZoom:function(){this.domParts.overlay.removeEventListener("touchmove",this._overlayZoomTouchMoveHandler,!1)},_overlayZoomTouchMoveHandler:function(a){a.preventDefault()},_toggleContent:function(a){var b=this._getAvailableHeight();this.lastAvailableHeight=b,this.domParts.content.style.cssText="height:"+this.lastAvailableHeight+"px !important; font-size: "+this.lastFontSizePercentage+"% !important;";var c=this.utils.getZoom();if(a){if(100/c>b)return;this.addClass(this.domParts.autosuggest,"show"),b>130/c&&this.events.emit("toggleContentVisibility","show"),this.addClass(this.domParts.content,"show")}else this.hasClass(this.domParts.content,"show")&&this.events.emit("closeErrnio",{event:"Box close"}),this.removeClass(this.domParts.content,"show"),this.events.emit("toggleContentVisibility","hide"),this.removeClass(this.domParts.autosuggest,"show")},_onPoweredByClick:function(){var b=a.originalWindowOpen||a.open;b("http://www.errnio.com"),this.events.emit("termClicked",{event:"Terms Clicked"})},_refresh:function(){a.location.href=a.location.href},_prependBody:function(a){document.body.insertBefore(a,document.body.childNodes[0])},loadStyleSheet:function(a){this.utils.loadStyleSheet(a)},_getBarHeight:function(){var a=this.utils.getZoom();return Math.floor(parseFloat(""+50/a).toFixed(3))},_isBarShowing:function(a){return this.hasClass(a,"show")}},u(k.prototype,d.prototype),l.prototype={constructor:l,_deviceSpecificInitialization:function(){this.barDetection=new i(this.utils,this.events)},_bindDeviceSpecificMethods:function(){this._onResize=this._onResize.bind(this)},_registerDeviceSpecificEvents:function(){a.addEventListener("resize",this._onResize,!1)},_adjustViewSize:function(a,b){var c,d=this.utils.getZoom(),e=this.utils.getScreenWidth(),f=Math.floor(parseFloat(""+e/d).toFixed(3)),g=this._getBarHeight();c=b?0:this._isBarShowing(this.domParts.view)?0:-1*g,this.domParts.view.style.cssText="top:"+c+"px !important; width:"+f+"px !important;height:"+g+"px !important;",this.events.emit("adjustContentSize",{height:Math.floor(parseFloat(""+100/d).toFixed(3)),fontSize:Math.floor(12/d)});var h=Math.floor(1/d*100);this.lastFontSizePercentage=h,this.domParts.searchInput.style.cssText="font-size:"+h+"% !important",this.domParts.poweredBy.style.cssText="font-size:"+Math.floor(12/d)+"px !important",this.domParts.content.style.cssText="font-size:"+h+"% !important;",a&&this._hide(!0,!0)},_hide:function(a,b){if(b||this._isBarShowing(this.domParts.view)){var c=this.utils.getZoom(),d=this.utils.getScreenWidth(),e=Math.floor(parseFloat(""+d/c).toFixed(3)),f=this._getBarHeight();this.domParts.view.style.cssText="top:-"+f+"px !important; width:"+e+"px !important;height:"+f+"px !important;",this.removeClass(this.domParts.view,"show"),a||this.events.emit("reportErrnioHide",{event:"Bar hide"})}this._onSearchInputBlur(),this.events.emit("errnioHide-ad",{})},_setSearchInputValue:function(){this.domParts.searchInput.value=a.location.href},_onSearchInputFocus:function(){this.focused=!0,this._toggleButtonMode("clear"),this._previousValue=this.domParts.searchInput.value,setTimeout(function(){this.domParts.searchInput.value="",this.domParts.searchInput.value=this._previousValue,this._selectAllInputText()}.bind(this),550),this._toggleScreenOverlay(!0),this._disableTouchMove(),setTimeout(this._toggleContent.bind(this,!0),1e3),this.events.emit("searchFocus",{event:"Box open"})},_getAvailableHeight:function(){var b=this.utils.getZoom().toFixed(3),c=a.innerHeight*b,d=50;return Math.floor(((c-d)/b).toFixed(3))},_onResize:function(){setTimeout(function(){this._adjustHeightChange()}.bind(this),200),this._handleOrientationChange()},_onScroll:function(){var a=this._getScrollPosition();this.scrollDirection=a.top==this.lastScrollTop?this.scrollDirection:a.top>this.lastScrollTop?0:1,this.lastScrollTop=a.top,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(this._onScrollEnd,this.scrollEndDelay)},_onSearchInputBlur:function(){this.focused=!1,this._toggleButtonMode("refresh"),this.domParts.searchInput.value=this.domParts.searchInput.value||this._previousValue,setTimeout(function(){this._toggleScreenOverlay(!1),this._toggleContent(!1),this._enableTouchMove(),this._setSearchInputValue(),this.events.emit("clearSearchSuggest"),this._clearTextSelection()}.bind(this),100)},_onButtonClick:function(a){var b=this.hasClass(this.domParts.view,"clear");return b?(this._previousValue=this.domParts.searchInput.value||this._previousValue,this.domParts.searchInput.value="",this.domParts.searchInput.focus(),a.preventDefault(),a.stopPropagation(),a.cancelable=!0,this.events.emit("clearSearchSuggest"),!1):(this.events.emit("refreshPage",{event:"Refresh"}),void this._refresh())},_onOrientationChange:function(){this._orientation!==a.orientation&&(this._orientation=a.orientation,this._handleOrientationChange()),this._adjustHeightChange()},_handleOrientationChange:function(){return this.utils.isLandscape()?void this._hide():void setTimeout(function(){this._adjustViewSize()}.bind(this),500)},_adjustHeightChange:function(){var a=this._getAvailableHeight();+this.lastAvailableHeight<+a&&(this._onSearchInputBlur(),this.domParts.searchInput.blur())}},u(l.prototype,k.prototype),m.prototype={constructor:m,_categoriesArray:["Action","Adventure","Arcade","Board","Brain & Puzzle","Business","Card","Casino","Education","Educational","Entertainment","Family","Finance","Health & Fitness","Medical","Music","Productivity","Puzzle","Racing","Role Playing","Shopping","Simulation","Social","Sports","Sports Games","Strategy","Tools","Trivia","Weather","Catalogs","Reference"],_iosCat:["Catalogs","Dice","Food & Drink","Graphics & Design","Navigation","Photo & Video","Social Networking","Utilities"],_androidCat:["Arcade & Action","Books & Reference","Brain & Puzzle","Cards & Casino","Casual","Comics","Communications","Libraries & Demo","Kids","Lifestyle","Live Wallpaper","Media & Video","Music & Audio","News & Magazines","Personalization","Photography","Tools","Travel & Local","Word"],_placementGuidIOS:"9245aae9-e063-4b80-82f1-48e978390e56",_placementGuidAndroid:"7e85fcbf-cca8-4353-a988-75fbf4e15685",_appNextUrl:"http://admin.appnext.com/offerWallApi.aspx?id=[[placementGUI]]&cnt=[[Number_ads]]&type=json",initialize:function(a,b,c,d){this.utils=a,this.events=b,this._config=d,this.numberOfAds=3,this.template=c;var e;e=this._config.params[0]&&this._config.params[0].categories&&this._config.params[0].categories.length?this._config.params[0].categories.join(","):this._findCatInUrl(),e&&(this._appNextUrl+="&cat=[[category]]");var f=this.utils.isIphone()?this._placementGuidIOS:this._placementGuidAndroid;this._appNextUrl=this._appNextUrl.replace("[[category]]",encodeURIComponent(e)),this._appNextUrl=this._appNextUrl.replace("[[placementGUI]]",f),this._appNextUrl=this._appNextUrl.replace("[[Number_ads]]",this.numberOfAds),this.bindMethods()},bindMethods:function(){this._appFeedResponse=this._appFeedResponse.bind(this)},getContentHtmlStr:function(a){this._callback=a,this._getAppFeed()},_getAppFeed:function(){this.utils.sendAjaxRequest(this._appNextUrl,this._appFeedResponse,"json")},_appFeedResponse:function(a){if(!a||!a.apps)return void this.events.emit("noContentToPresent");a=a.apps;for(var b="",c=0;c<a.length;c++)b+=this.template.replace("[[content-click-url]]",a[c].urlApp).replace("[[content-img-url]]",a[c].urlImg).replace("[[content-title]]",a[c].title);this._callback(b)},_findCatInUrl:function(){for(var a,b,c=this._categoriesArray.concat(this.utils.isIphone()?this._iosCat:this._androidCat),d=location.href.toLowerCase(),e=[],f=0;f<c.length;f++)a=c[f].toLowerCase(),-1!=a.indexOf("&")&&(b=a.split(" & "),(-1!=d.indexOf(b[0])||-1!=d.indexOf(b[1]))&&e.push(a)),-1!=a.indexOf(" ")&&-1===a.indexOf("&")&&(b=a.split(" "),(-1!=d.indexOf(b[0])||-1!=d.indexOf(b[1]))&&e.push(a)),-1!=d.indexOf(a)&&e.push(a);return e.length?e.join(","):null}},n.prototype={constructor:n,_dataFromServer:decodeURIComponent("%7B%22styleSheetUrl%22%3A%22http%3A%2F%2Fservice.errnio.com%2FstyleSheet%2F533d195165edcfbc95fa7093%2F1%22%2C%22features%22%3A%7B%22search%22%3A%7B%22enabled%22%3Atrue%2C%22provider%22%3A%22google%22%2C%22params%22%3A%5B%5D%7D%2C%22autosuggest%22%3Atrue%2C%22content%22%3A%7B%22enabled%22%3Afalse%2C%22provider%22%3A%22appsuggest%22%2C%22params%22%3A%5B%5D%7D%2C%22interstitial%22%3A%7B%22enabled%22%3Afalse%2C%22provider%22%3A%22matomy%22%2C%22params%22%3A%5B%5D%7D%2C%22facebookBanner%22%3Afalse%2C%22adMarketplace%22%3A%7B%22enabled%22%3Afalse%2C%22adsCount%22%3A2%7D%7D%2C%22enabled%22%3Afalse%2C%22showPoweredBy%22%3Atrue%2C%22adIntegration%22%3A%7B%22paramsNames%22%3A%5B%5D%2C%22getParamsFromScriptSrc%22%3Atrue%7D%7D"),initialize:function(a,b){this.utils=a,this.events=b,this._parseServerData(this._dataFromServer)},_parseServerData:function(a){try{this._dataFromServer=JSON.parse(a)}catch(b){console.log("Error parsing data from server: ",b)}},get:function(a){return this._dataFromServer[a]||null}},o.prototype={constructor:o,_feedUrl:"http://api.grazeit.com/rec-api/getrecs.json?pubid=[[pubid]]&webid=[[webid]]&wid=[[wid]]&recsnum=[[recsnum]]&url=[[domain]]&cs=UTF-8",initialize:function(a,b,c,d){this.utils=a,this.events=b,this.template=c,this._config=d,this._numberOfRecommendations=3,this._feedUrl=this._getFeedUrl(),this.bindMethods()},bindMethods:function(){this._feedResponse=this._feedResponse.bind(this)},_getFeedUrl:function(){var a=this._feedUrl.replace("[[recsnum]]",this._numberOfRecommendations);return this._config.params=this._config.params||[],this._config.params.forEach(function(b){var c=Object.keys(b)[0];a=a.replace("[["+c+"]]",encodeURIComponent(b[c]))}),a},getContentHtmlStr:function(a){this._callback=a,this._getFeed()},_getFeed:function(){this.utils.sendJsonpRequest(this._feedUrl,this._feedResponse,"cb")},_feedResponse:function(a){if(!a)return void this.events.emit("noContentToPresent");a=a.recs||[];var b,c="";for(b=0;b<a.length;b++)c+=this.template.replace("[[content-click-url]]",a[b].clickUrl).replace("[[content-img-url]]",a[b].thumbnail_path).replace("[[content-title]]",a[b].title);this._callback(c)}},p.prototype={constructor:p,_contentHtmlStr:decodeURIComponent("%3Cdiv%20class%3D%22content-item%22%20data-clickUrl%3D%22%5B%5Bcontent-click-url%5D%5D%22%3E%20%20%20%20%20%3Cimg%20class%3D%22content-image%22%20src%3D%22%5B%5Bcontent-img-url%5D%5D%22%2F%3E%20%20%20%20%20%3Cspan%20class%3D%22content-title%22%3E%5B%5Bcontent-title%5D%5D%3C%2Fspan%3E%20%3C%2Fdiv%3E%20"),initialize:function(a,b,c){this.domUtilsInitialize(),this.utils=a,this.events=b,this._config=c,this._noContentToPresent=!1,this.domParts={content:".content"};var d;switch(this._registerEvents(),this._config.provider){case"engageya":d=o;break;case"appsuggest":d=m}this.contentProvider=new d(this.utils,this.events,this._contentHtmlStr,this._config)},_registerEvents:function(){this.events.on("errnioViewReady",this._onErrnioViewReady,this),this.events.on("toggleContentVisibility",this._onToggleContentVisibility,this),this.events.on("adjustContentSize",this._onAdjustContentSize,this),this.events.on("noContentToPresent",this._onNoContentToPresent,this)},_onErrnioViewReady:function(){this._cacheDomParts(),this.contentProvider.getContentHtmlStr(function(b){this._addViewNodeToDom(b),this.domParts.content.addEventListener("click",function(b){var c,d=b.target,e="DIV"!==d.tagName?this.findParentNode("DIV",b.target):d;return e?(c=e.getAttribute("data-clickUrl"))?void this.events.emit("contentItemClikced",{event:"recommend click",label:this._config.provider,hitCallback:function(){a.location.href=c}}):void this.events.emit("debug",{event:"Content-Error",label:"Missing click url"}):void this.events.emit("debug",{event:"Content-Error",label:"Missing content elm"})}.bind(this),!1)}.bind(this))},_cacheDomParts:function(){for(var a in this.domParts){if(!this.domParts.hasOwnProperty(a))return;this.domParts[a]=this.$$(this.domParts[a])[0]}},_onAdjustContentSize:function(a){this.domParts.content.style.cssText="height: "+a.height+"px !important;font-size:"+a.fontSize+"px !important;"},_onToggleContentVisibility:function(a){"show"!==a||this._noContentToPresent?this.removeClass(this.domParts.content,"show"):this.addClass(this.domParts.content,"show")},_onNoContentToPresent:function(){this._noContentToPresent=!0},_addViewNodeToDom:function(a){a&&(this.domParts.content.innerHTML=a)}},u(p.prototype,d.prototype),q.prototype={constructor:q,searchUrls:{startapp:"http://www.searchmobileonline.com/?sourceid=14&pubid=103286257&prodid=203875053&q=[[searchTerm]]",conduit:"http://m.search.conduit.com/search?q=[[searchTerm]]&mid=[[mid]]&SearchSource=1",google:"http://www.google.com/search?q=[[searchTerm]]"},initialize:function(a,b,c,d){this.utils=a,this.events=b,this._config="object"==typeof c?c:{enabled:c},this.interstitialON=d,this._registerEvents()},_registerEvents:function(){this.events.on("search",this._onSearch,this)},_onSearch:function(a){a.searchTerm=a.searchTerm.trim&&a.searchTerm.trim()||a.searchTerm.trim,this.doSearch(a.searchTerm)},doSearch:function(b){var c=this.utils.isUrl(b),d=c?this.utils.verifyAndAddProtocol(b):this._getSearchUrl(b);setTimeout(function(){this.interstitialON?this.events.emit("showInterstitial",d):a.location.href=d}.bind(this),100)},_getSearchUrl:function(a){var b=this.searchUrls[this._config.provider]||this.searchUrls.google,c=b.replace("[[searchTerm]]",a);return this._config.params=this._config.params||[],this._config.params.forEach(function(a){var b=Object.keys(a)[0];c=c.replace("[["+b+"]]",a[b])}),c}},r.prototype={constructor:r,_pubAdId:"2504125",_interPageUrl:"http://s3.amazonaws.com/errnio-service-static/inter/[[provider]].html?siteId=[[siteId]]&pubAdId=[[pubAdId]]&targetUrl=[[targetUrl]][[blanka]]",initialize:function(b,c,d){this.domUtilsInitialize(),this.utils=b,this.events=c,this.config=d,this.currentDomain=a.location.hostname;var e=this.utils.isDevMode()?"&blanka=1":"";this._interPageUrl=this._interPageUrl.replace("[[blanka]]",e),this.originalWindowOpen=function(){},this._interPageUrl=this._interPageUrl.replace("[[provider]]",this.config.provider),this._interPageUrl=this._interPageUrl.replace("[[siteId]]",this.utils._siteId),this._interPageUrl=this._interPageUrl.replace("[[pubAdId]]",this._pubAdId),this._registerEvents(),this._bindToAnchors(),this._wrapWindowOpen()},_registerEvents:function(){this.events.on("showInterstitial",this._goToInterPage,this)},_bindToAnchors:function(){a.addEventListener("click",function(a){var b=a.target,c="A"!==b.tagName?this.findParentNode("A",a.target):b;if(c&&-1==c.className.indexOf("content")){a.preventDefault();var d=c.getAttribute("href"),e=this._getHostnameFromUrl(d),f=this._shouldGoToInterPage(e);f?this._goToInterPage(d):this._goToTargetUrl(d)}}.bind(this),!1)},_getHostnameFromUrl:function(a){var b=document.createElement("a");return b.setAttribute("href",a),b.hostname},_shouldGoToInterPage:function(a){return this.currentDomain!==a},_goToInterPage:function(b,c,d){var e=this._interPageUrl.replace("[[targetUrl]]",encodeURIComponent(b));c?(d[0]=e,this.originalWindowOpen.apply(a,d)):a.location.href=e},_goToTargetUrl:function(b,c,d){a.location.href=b,c?this.originalWindowOpen.apply(a,d):a.location.href=b},_wrapWindowOpen:function(){this.originalWindowOpen=a.open,a.originalWindowOpen=a.open,a.open=function(a){var b=this.utils.verifyAndAddProtocol(a),c=this._getHostnameFromUrl(b),d=this._shouldGoToInterPage(c);d?this._goToInterPage(a,!0,arguments):this._goToTargetUrl(a,!0,arguments)}.bind(this)}},u(r.prototype,d.prototype),s.prototype={constructor:s,initialize:function(a,b){this.utils=a,this.events=b,this._registerEvents()},_registerEvents:function(){this.events.on("tracking",this._sendEvent,this),this.events.on("errnioViewReady",this._sendEvent,this),this.events.on("search",this._sendEvent,this),this.events.on("closeErrnio",this._sendEvent,this),this.events.on("refreshPage",this._sendEvent,this),this.events.on("reportErrnioHide",this._sendEvent,this),this.events.on("errnioShow",this._sendEvent,this),this.events.on("searchFocus",this._sendEvent,this),this.events.on("termClicked",this._sendEvent,this),this.events.on("contentItemClikced",this._sendEvent,this),this.events.on("debug",this._sendEvent,this)},_sendEvent:function(b){var c=this.utils._siteId,d="search"===b.event?b.source:b.event,e=b.label||null,f="function"==typeof b.hitCallback?b.hitCallback:null;a.errnioGAtracker("errnioTracker.send",{hitType:"event",eventCategory:c,eventAction:d,eventLabel:e,hitCallback:f})}},t.prototype={constructor:t,initialize:function(a,b,c){this.utils=a,this.events=b,this.data=c,this.featuresDataFromServer=this.data.get("features");var d=this.featuresDataFromServer.facebookBanner,e=this.data.get("enabled");e&&(this._loadAnalytics(),this.utils.isSupportedMobile()&&(this.utils.isIphone()&&this.utils.isFacebookWebView()&&!d||(this._setDeviceOS(),this._loadView(),this._loadStyleSheet(),this._loadHammer(),this._initMoneyMakers())))},_setDeviceOS:function(){this.deviceType=this.utils.isIphone()?"iphone":this.utils.isAndroidMobile()?"android":"android"},_loadView:function(){var a,b={showPoweredBy:this.data.get("showPoweredBy"),adMarketplaceEnabled:this.featuresDataFromServer.adMarketplace.enabled},c=this.data.get("adIntegration");"iphone"===this.deviceType?a=x:"android"===this.deviceType&&(a=l),this.view=new a(this.utils,this.events,b),this.adIntegration=new f(this.utils,this.events,c)},_loadStyleSheet:function(){var a=B.get("styleSheetUrl");this.view.loadStyleSheet(a)},_loadHammer:function(){var a="https://s3.amazonaws.com/errnio-service-static/js/libs/hammer.min.js";this.utils.loadScript("url",a,function(){this.events.emit("errnioControllerReady")}.bind(this))},_loadAnalytics:function(){var a;a=this.utils.isDevMode()?"(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','errnioGAtracker');errnioGAtracker('create', 'UA-49402951-2', { 'name': 'errnioTracker' });errnioGAtracker('errnioTracker.send', 'pageview');":"(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','errnioGAtracker');errnioGAtracker('create', 'UA-49402951-3', { 'name': 'errnioTracker' });errnioGAtracker('errnioTracker.send', 'pageview');",this.utils.loadScript("code",a),this.analytics=new s(this.utils,this.events)},_initMoneyMakers:function(){var a,b=this.featuresDataFromServer.content,c=this.featuresDataFromServer.interstitial,d="object"==typeof c?c.enabled===!0:c===!0;b.enabled!==!0||this.utils.isFacebookWebView()||(this.content=new p(this.utils,this.events,b)),d&&(this.interstitial=new r(this.utils,this.events,this.featuresDataFromServer.interstitial)),this.featuresDataFromServer.adMarketplace.enabled===!0&&(a={ip:this.utils.getIp(),userAgent:this.utils.getDeviceInfo().ua,adsCount:this.featuresDataFromServer.adMarketplace.adsCount},this.adMarketplace=new g(this.utils,this.events,a)),this.search=new q(this.utils,this.events,this.featuresDataFromServer.search,d)}};var z=new c,A=new e,B=new n(z,A);setTimeout(function(){new t(z,A,B)},1),v.prototype={constructor:v,_appNextUrl:"http://admin.appnext.com/offerWallApi.aspx?id=9245aae9-e063-4b80-82f1-48e978390e56&cnt=1&type=json",initialize:function(a,b){this.domUtilsInitialize(),this.utils=a,this.events=b,this.domParts={view:".errnio-wrapper",search:".address-input-wrapper",content:".content-wrapper",facebookView:".facebook-wrapper"},this.isViewReady=!1,this.bindMethods(),this._registerEvents(),this._getAppData()},_hideDefaultView:function(){this.addClass(this.domParts.search,"hide"),this.addClass(this.domParts.content,"hide")},bindMethods:function(){this._appFeedResponse=this._appFeedResponse.bind(this)},_registerEvents:function(){this.events.on("errnioViewReady",this._onErrnioViewReady,this),this.events.on("adjustFacebookSize",this._onAdjustFacebookSize,this)},_onErrnioViewReady:function(){this._cacheDomParts(),this._hideDefaultView(),this.addClass(this.domParts.view,"facebook"),this.addClass(this.domParts.facebookView,"show"),this.isViewReady=!0,this.appData&&this._setAppDataToDom()},_cacheDomParts:function(){for(var a in this.domParts){if(!this.domParts.hasOwnProperty(a))return;this.domParts[a]=this.$$(this.domParts[a])[0]}},_getAppData:function(){this.utils.sendAjaxRequest(this._appNextUrl,this._appFeedResponse,"json")},_appFeedResponse:function(a){var b=a&&a.apps&&a.apps[0]||null;b&&(this.appData=b,this.isViewReady&&this._setAppDataToDom())},_setAppDataToDom:function(){var a=this.$$(".facebook-img")[0],b=this.$$(".facebook-title")[0];a.style.cssText='background: transparent url("'+this.appData.urlImg+'") center center no-repeat !important; background-size: contain !important',b.innerHTML=this.appData.title,this.domParts.facebookView.setAttribute("data-url",this.appData.urlApp),this.appData=null,this._setClickHandler()},_setClickHandler:function(){var b=this.domParts.facebookView.getAttribute("data-url");this.domParts.facebookView.addEventListener("click",function(){this.events.emit("contentItemClikced",{event:"FB Banner Click"}),setTimeout(function(){a.location.href=b}.bind(this),10)}.bind(this),!1)},_onAdjustFacebookSize:function(a){this.domParts.facebookView.style.cssText="font-size:"+a.fontSize+"px !important;"}},u(v.prototype,d.prototype),w.prototype={constructor:w,_bindMethods:function(){},_registerDomEvents:function(){},_getCurrentScreenHeight:function(){return a.innerHeight*this.utils.getZoom()},_checkNativeBarVisibility:function(){var a=this._getCurrentScreenHeight(),b=a-this._screenHeightNativeBarVisible;return!(b>60)},shouldShow:function(a,c,d,e){var f;if(this._isFacebookWebView)return this._shouldShowFB(a,c,d,e);if(this.utils.isLandscape())return!1;if(f=this.utils.getZoom(),this.utils.isChromeBrowser()&&f>1)return!1;if(e!==b&&f>1&&1===c)return!1;if(this._isIOS6)return a>50?!0:!1;if(this.utils.isMinimalUi())return!0;var g=this.isNativeBarVisible();return 0!==c||d?1!==c||"drag"!==e||this._isChrome||g?1!==c||"swipe"!==e||this._isChrome?this._isChrome?!1:!g:!1:!0:this._isChrome?!0:1==f&&this._isBottomOfPage(a)?!1:!0},_shouldShowFB:function(a){return 0!==this.scrollDirection||this.pinched?a>50?!0:!1:!0},_isBottomOfPage:function(a){var b=document.documentElement.clientHeight,c=document.body,d=document.documentElement,e=Math.max(c.scrollHeight,c.offsetHeight,d.clientHeight,d.scrollHeight,d.offsetHeight);return a+b>=e},isNativeBarVisible:function(){return this._checkNativeBarVisibility()}},u(w.prototype,h.prototype),x.prototype={constructor:x,_deviceSpecificInitialization:function(){this._isChrome=z.isChromeBrowser(),this.barDetection=new w(this.utils,this.events),this._clearButtonFlag=!1,this._isFacebookWebView=this.utils.isFacebookWebView(),this._isFacebookWebView&&(this.facebookView=new v(this.utils,this.events))},_bindDeviceSpecificMethods:function(){},_registerDeviceSpecificEvents:function(){this.domParts.searchInput.addEventListener("blur",this._onSearchInputBlur,!1),this.domParts.button.addEventListener("mousedown",this._onButtonClick,!1)},_adjustViewSize:function(b){var c=this.utils.getZoom(),d=this.utils.getScreenWidth(),e=Math.floor(parseFloat(""+d/c).toFixed(3)),f=this._getBarHeight();this.domParts.view.style.cssText="width:"+e+"px !important;height:"+f+"px !important;",this.events.emit("adjustContentSize",{height:Math.floor(parseFloat(""+100/c).toFixed(3)),fontSize:Math.floor(12/c)}),this.events.emit("adjustFacebookSize",{height:Math.floor(parseFloat(""+100/c).toFixed(3)),fontSize:Math.floor(14/c)});var g=this._getBarFontSize();this.lastFontSizePercentage=g,this.domParts.searchInput.style.cssText="font-size:"+g+"% !important;",this.domParts.poweredBy.style.cssText="font-size:"+Math.floor(12/c)+"px !important;",this.domParts.content.style.cssText="font-size:"+g+"% !important;",c>1?(this.addClass(this.domParts.view,"zoom"),this.removeClass(this.domParts.view,"no-zoom"),this.domParts.view.style.cssText+="top:"+this.lastScrollTop+"px !important;left:"+a.scrollX+"px !important;"):(this.removeClass(this.domParts.view,"zoom"),this.addClass(this.domParts.view,"no-zoom"),this.domParts.view.style.cssText+="left:0 !important;",this._adjustViewSizeFirstTime?this._adjustViewSizeFirstTime=!1:this.domParts.view.style.cssText+="top:0 !important;"),b&&!this.utils.isLandscape()&&this.utils.isMinimalUi()&&this._show()},_hide:function(a){this._isBarShowing(this.domParts.view)&&!a&&this.events.emit("reportErrnioHide",{event:"Bar hide"}),(!this.focused||this.utils.isLandscape())&&(this.removeClass(this.domParts.view,"show"),90!=this._orientation&&(this.domParts.view.style.cssText="top: -"+this._getBarHeight()+"px !important")),this.events.emit("errnioHide-ad",{})},_setSearchInputValue:function(){this.domParts.searchInput.value=z.isChromeBrowser()?a.location.href:"Search web"},_onSearchInputFocus:function(){this.addClass(this.domParts.view,"infocus"),this.removeClass(this.domParts.view,"show"),this.focused=!0,this._toggleButtonMode("clear"),this._previousValue=this.domParts.searchInput.value,this._selectAllInputText(),this._toggleScreenOverlay(!0),this._disableTouchMove(),setTimeout(this._handleIphoneFocus.bind(this),20),this._toggleContent(!0),this.events.emit("searchFocus",{event:"Box open"})},_onScroll:function(){var a=this._getScrollPosition();this._isChrome||(this.scrollDirection=a.top==this.lastScrollTop?this.scrollDirection:a.top>this.lastScrollTop?0:1),this.lastScrollTop=a.top,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(this._onScrollEnd,this.scrollEndDelay)},_handleIphoneFocus:function(){var b=a.pageYOffset||document.documentElement.scollTop,c=a.pageXOffset||document.documentElement.scollLeft;a.scrollTo(c,b-1),this.addClass(this.domParts.view,"show")},_onSearchInputBlur:function(){return this.removeClass(this.domParts.view,"infocus"),this._clearButtonFlag?(this._clearButtonFlag=!1,this.domParts.searchInput.focus(),!1):(this.focused=!1,this._toggleButtonMode("refresh"),this.domParts.searchInput.value=this.domParts.searchInput.value||this._previousValue,setTimeout(function(){this._toggleScreenOverlay(!1),this._toggleContent(!1),this._enableTouchMove(),this._setSearchInputValue(),this.events.emit("clearSearchSuggest"),this._clearTextSelection()}.bind(this),100),void(this.utils.getZoom()>1&&(this.domParts.view.style.cssText+="top:"+(this.lastScrollTop-(this.lastScrollTop-a.pageYOffset))+"px !important;left:"+a.scrollX+"px !important;")))},_onButtonClick:function(){var a=this.hasClass(this.domParts.view,"clear");return this._clearButtonFlag=a,a?(this._previousValue=this.domParts.searchInput.value||this._previousValue,this.domParts.searchInput.value="",this.events.emit("clearSearchSuggest"),!1):(this.utils.isIOS()&&this.utils.isChromeBrowser()&&this.domParts.searchInput.focus(),this.events.emit("refreshPage",{event:"Refresh"}),void this._refresh())},_getAvailableHeight:function(){var a=this.utils.getZoom().toFixed(3),b=this.utils.getScreenHeight(),c=480===b?280:300,d=this.utils.isChromeBrowser()?23:0,e=50;return Math.floor((b-c-e-d)/a)},_getBarFontSize:function(){var b;return 0===this._orientation?(b=this.utils.getZoom(),Math.floor(1/b*100)):(b=this.utils.getScreenHeight()/a.innerWidth,Math.floor(100*b))},_onOrientationChange:function(){this._orientation!==a.orientation&&(this._orientation=a.orientation,this._handleOrientationChange())},_handleOrientationChange:function(){this.utils.isLandscape()&&(this._hide(),this.domParts.searchInput.blur())}},u(x.prototype,k.prototype)}(window);